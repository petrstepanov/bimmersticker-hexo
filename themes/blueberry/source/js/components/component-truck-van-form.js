var ComponentTruckVanForm=function(i,n,a){var r,l,u={};Math.floor(Date.now()/1e3);function c(){var t=n.getFormData(u.$form);localStorage.setItem("dataKeyVanTruck",JSON.stringify(t))}function d(){var t=parseFloat(u.$selectSize.find("option:selected").data("price")),n=parseInt(u.$inputQuantity.val()),t="Add Item"+(1==n?"":"s")+" to Cart • &#36;"+(t*n).toFixed(2),n=(u.$buttonSubmit.html(t),i('<span class="ms-2 spinner-border spinner-border-sm" aria-hidden="true" style="width: 1.2rem;height: 1.2rem;"></span>'));u.$buttonSubmit.append(n)}function e(){var t;u.$noJs.remove(),d(),localStorage.getItem("dataKeyVanTruck")&&((t=JSON.parse(localStorage.getItem("dataKeyVanTruck"))).length&&u.$inputLength.val(t.length),t.heading&&u.$inputHeading.val(t.heading).trigger("input"),t.heading_font&&u.$selectHeadingFont.val(t.heading_font).change(),t.heading_color&&u.$selectHeadingColor.val(t.heading_color).change(),t.content&&u.$textareaContent.val(t.content).trigger("input"),t.content_font&&u.$selectContentFont.val(t.content_font).change(),t.content_color&&u.$selectContentColor.val(t.content_color).change(),t.bg_color&&u.$inputBgColor.val(t.bg_color).change(),t.length&&u.$inputLength.val(t.length).change(),t.quantity)&&u.$inputQuantity.val(t.quantity)}function o(){u.$inputHeading.on("input",function(t){var n;s();u.$previewContainer.addClass("loading"),clearTimeout(r),r=setTimeout(function(){p()},1500),n=this.value,u.$buttonBuy.attr("data-item-custom1-value",n.replace(/\s/g," ")),t.originalEvent&&t.originalEvent.isTrusted&&c()}),u.$selectHeadingFont.change(function(t){u.$previewContainer.addClass("loading"),clearTimeout(r),r=setTimeout(function(){p()},1500);var n=i(this).val();u.$buttonBuy.attr("data-item-custom2-value",n),t.originalEvent&&t.originalEvent.isTrusted&&c()}),u.$selectHeadingColor.change(function(t){u.$previewContainer.addClass("loading"),clearTimeout(r),r=setTimeout(function(){p()},1500);var n=i(this).val();u.$buttonBuy.attr("data-item-custom3-value",n),t.originalEvent&&t.originalEvent.isTrusted&&c()}),u.$textareaContent.on("input",function(t){var n,e=g();n=this.value,u.$buttonBuy.attr("data-item-custom4-value",n.replace(/\s/g," ")),t.originalEvent&&t.originalEvent.isTrusted&&c(),0==e.length?u.$previewContentContainer.empty():(u.$previewContainer.addClass("loading"),clearTimeout(l),l=setTimeout(function(){v()},1500))}),u.$selectContentFont.change(function(t){u.$previewContainer.addClass("loading"),clearTimeout(l),l=setTimeout(function(){v()},1500);var n=i(this).val();u.$buttonBuy.attr("data-item-custom5-value",n),t.originalEvent&&t.originalEvent.isTrusted&&c()}),u.$selectContentColor.change(function(t){u.$previewContainer.addClass("loading"),clearTimeout(l),l=setTimeout(function(){v()},1500);var n=i(this).val();u.$buttonBuy.attr("data-item-custom6-value",n),t.originalEvent&&t.originalEvent.isTrusted&&c()}),u.$anchorInputBgColor.click(function(t){t.preventDefault(),u.$labelInputBgColor.click()}),u.$inputBgColor.change(function(t){var n=i(this).val(),e=(u.$previewContainer.addClass("loading"),new Promise(function(t){r&&clearTimeout(r),r=setTimeout(function(){p(t)},1500)})),o=new Promise(function(t){l&&clearTimeout(l),l=setTimeout(function(){v(t)},1500)});Promise.all([e,o]).then(function(){u.$previewContainerBg.css("border-color",n),u.$previewContainerBg.css("background-color",n),u.$inputBgColorLine.css("background-color",n)}),t.originalEvent&&t.originalEvent.isTrusted&&c()}),u.$selectSize.change(function(t){var n,e,o=i(this).val();d(),o=o,n=u.$inputLength.val()+" in",e=u.$inputHeight.val()+" in",u.$buttonBuy.attr("data-item-custom7-value",n),u.$buttonBuy.attr("data-item-custom8-value",e),u.$buttonBuy.attr("data-item-custom9-value",o),c()}),u.$inputQuantity.change(function(t){u.$buttonBuy.attr("data-item-quantity",this.value),d(),c()}),u.$form.submit(function(t){if(t.preventDefault(),!n.isInViewport(u.$buttonSubmit))return document.activeElement.blur(),!1;u.$buttonBuy.click()})}function s(){return u.$inputHeading.val().length?u.$inputHeading.val():"Your Company Name"}function g(){return u.$textareaContent.val()}function $(t,n,e){var o=u.$inputBgColor.val().replace("#",""),t="&id=[fontId]&rt=[text]&bg=[bgColor]&fg=[fgColor]".replace("[fontId]",t).replace("[text]",encodeURIComponent(n)).replace("[bgColor]",o).replace("[fgColor]",e);return document.location.href.includes("localhost")?"https://render.myfonts.net/fonts/font_rend.php?rs=48&w=0&sc=2&nie=true"+t:"/font-myfont/"+t}function p(t){var n=s(),e=u.$selectHeadingFont.find("option:selected").data("fontId"),o=u.$selectHeadingColor.find("option:selected").data("hex");url=$(e,n,o),i("<img>",{class:"w-100 h-auto"}).on("load",function(){u.$previewHeadingContainer.empty(),i(this).appendTo(u.$previewHeadingContainer),t&&"function"==typeof t&&t(),u.$previewContainer.removeClass("loading"),a.emit("truckVanPreviewContainerSizeChanged")}).attr({src:url})}function v(t){var n=g(),e=u.$selectContentFont.find("option:selected").data("fontId"),o=u.$selectContentColor.find("option:selected").data("hex");url=$(e,n,o),i("<img>",{class:"w-100 h-auto"}).on("load",function(){u.$previewContentContainer.empty(),i(this).appendTo(u.$previewContentContainer),t&&"function"==typeof t&&t(),u.$previewContainer.removeClass("loading"),a.emit("truckVanPreviewContainerSizeChanged")}).attr({src:url})}return{init:function(t){t&&(u.$el=i(t),u.$form=u.$el,u.$inputHeading=u.$el.find("#inputHeading"),u.$selectHeadingFont=u.$el.find("#selectHeadingFont"),u.$selectHeadingColor=u.$el.find("#selectHeadingColor"),u.$textareaContent=u.$el.find("#textareaContent"),u.$selectContentFont=u.$el.find("#selectContentFont"),u.$selectContentColor=u.$el.find("#selectContentColor"),u.$anchorInputBgColor=u.$el.find("#anchorInputBgColor"),u.$inputBgColorLine=u.$el.find("#inputBgColorLine"),u.$labelInputBgColor=u.$el.find("#labelInputBgColor"),u.$inputBgColor=u.$el.find("#inputBgColor"),u.$previewContainer=u.$el.find("#truck-van-preview"),u.$previewContainerBg=u.$el.find("#truck-van-preview-bg"),u.$previewHeadingContainer=u.$el.find("#truck-van-preview-heading"),u.$previewContentContainer=u.$el.find("#truck-van-preview-content"),u.$inputLength=u.$el.find("#inputLength"),u.$inputHeight=u.$el.find("#inputHeight"),u.$selectSize=u.$el.find("#selectSize"),u.$inputQuantity=u.$el.find("#inputQuantity"),u.$buttonSubmit=u.$el.find("#buttonSubmit"),u.$totalPrice=u.$el.find("#totalPrice"),u.$buttonBuy=u.$el.find(".snipcart-add-item"),u.$noJs=u.$el.find(".js--nojs-only"),o(),e())}}};$(function(){new ComponentTruckVanForm(window.$,window.helpers,window.events).init(document.querySelector(".js--component-truck-van-form"))});