var ComponentTruckVanForm=function(i,e,a){var r,l,u={};Math.floor(Date.now()/1e3);function c(){var t=e.getFormData(u.$form);localStorage.setItem("dataKeyVanTruck",JSON.stringify(t))}function d(){var t=u.$selectSize.val(),t=parseFloat(u.$selectSize.find("option[value='"+t+"']").data("price")),e=parseInt(u.$inputQuantity.val()),t="Add Item"+(1==e?"":"s")+" to Cart • &#36;"+(t*e).toFixed(2),e=(u.$buttonSubmit.html(t),i('<span class="ms-2 spinner-border spinner-border-sm" aria-hidden="true" style="width: 1.2rem;height: 1.2rem;"></span>'));u.$buttonSubmit.append(e)}function n(){var t;u.$noJs.remove(),d(),localStorage.getItem("dataKeyVanTruck")&&((t=JSON.parse(localStorage.getItem("dataKeyVanTruck"))).length&&u.$inputLength.val(t.length),t.heading&&u.$inputHeading.val(t.heading).trigger("input"),t.heading_font&&u.$selectHeadingFont.val(t.heading_font).trigger("change"),t.heading_color&&u.$selectHeadingColor.val(t.heading_color).trigger("change"),t.content&&u.$textareaContent.val(t.content).trigger("input"),t.content_font&&u.$selectContentFont.val(t.content_font).trigger("change"),t.content_color&&u.$selectContentColor.val(t.content_color).trigger("change"),t.bg_color&&u.$inputBgColor.val(t.bg_color).trigger("change"),t.length&&u.$inputLength.val(t.length).trigger("change"),t.quantity)&&u.$inputQuantity.val(t.quantity)}function o(){u.$inputHeading.on("input",function(t){var e;s();u.$previewContainer.addClass("loading"),clearTimeout(r),r=setTimeout(function(){p()},1500),e=this.value,u.$buttonBuy.attr("data-item-custom1-value",e.replace(/\s/g," ")),t.isTrusted&&c()}),u.$selectHeadingFont.on("change",function(t){u.$previewContainer.addClass("loading"),clearTimeout(r),r=setTimeout(function(){p()},1500);var e=i(this).val();u.$buttonBuy.attr("data-item-custom2-value",e),t.isTrusted&&c()}),u.$selectHeadingColor.on("change",function(t){u.$previewContainer.addClass("loading"),clearTimeout(r),r=setTimeout(function(){p()},1500);var e=i(this).val();u.$buttonBuy.attr("data-item-custom3-value",e),t.isTrusted&&c()}),u.$textareaContent.on("input",function(t){var e,n=g();e=this.value,u.$buttonBuy.attr("data-item-custom4-value",e.replace(/\s/g," ")),t.isTrusted&&c(),0==n.length?u.$previewContentContainer.empty():(u.$previewContainer.addClass("loading"),clearTimeout(l),l=setTimeout(function(){v()},1500))}),u.$selectContentFont.on("change",function(t){u.$previewContainer.addClass("loading"),clearTimeout(l),l=setTimeout(function(){v()},1500);var e=i(this).val();u.$buttonBuy.attr("data-item-custom5-value",e),t.isTrusted&&c()}),u.$selectContentColor.on("change",function(t){u.$previewContainer.addClass("loading"),clearTimeout(l),l=setTimeout(function(){v()},1500);var e=i(this).val();u.$buttonBuy.attr("data-item-custom6-value",e),t.isTrusted&&c()}),u.$anchorInputBgColor.on("click",function(t){t.preventDefault(),u.$labelInputBgColor.click()}),u.$inputBgColor.on("change",function(t){var e=i(this).val(),n=(u.$previewContainer.addClass("loading"),new Promise(function(t){r&&clearTimeout(r),r=setTimeout(function(){p(t)},1500)})),o=new Promise(function(t){l&&clearTimeout(l),l=setTimeout(function(){v(t)},1500)});Promise.all([n,o]).then(function(){u.$previewContainerBg.css("border-color",e),u.$previewContainerBg.css("background-color",e),u.$inputBgColorLine.css("background-color",e)}),t.isTrusted&&c()}),u.$selectSize.on("change",function(t){var e,n,o=i(this).val();d(),o=o,e=u.$inputLength.val()+" in",n=u.$inputHeight.val()+" in",u.$buttonBuy.attr("data-item-custom7-value",e),u.$buttonBuy.attr("data-item-custom8-value",n),u.$buttonBuy.attr("data-item-custom9-value",o),c()}),u.$inputQuantity.on("change",function(t){u.$buttonBuy.attr("data-item-quantity",this.value),d(),c()}),u.$form.on("submit",function(t){if(t.preventDefault(),!e.isInViewport(u.$buttonSubmit))return document.activeElement.blur(),!1;u.$buttonBuy.get(0).click()})}function s(){return u.$inputHeading.val().length?u.$inputHeading.val():"Your Company Name"}function g(){return u.$textareaContent.val()}function $(t,e,n){var o=u.$inputBgColor.val().replace("#",""),t="&id=[fontId]&rt=[text]&bg=[bgColor]&fg=[fgColor]".replace("[fontId]",t).replace("[text]",encodeURIComponent(e)).replace("[bgColor]",o).replace("[fgColor]",n);return document.location.href.includes("localhost")?"https://render.myfonts.net/fonts/font_rend.php?rs=48&w=0&sc=2&nie=true"+t:"/font-myfont/"+t}function p(t){var e=s(),n=u.$selectHeadingFont.find("option[value='"+u.$selectHeadingFont.val()+"']").data("fontId"),o=u.$selectHeadingColor.find("option[value='"+u.$selectHeadingColor.val()+"']").data("hex");url=$(n,e,o),i("<img>").addClass("w-100 h-auto").on("load",function(){u.$previewHeadingContainer.empty(),i(this).appendTo(u.$previewHeadingContainer.get(0)),t&&"function"==typeof t&&t(),u.$previewContainer.removeClass("loading"),a.emit("truckVanPreviewContainerSizeChanged")}).attr({src:url})}function v(t){var e=g(),n=u.$selectContentFont.find("option[value='"+u.$selectContentFont.val()+"']").data("fontId"),o=u.$selectContentColor.find("option[value='"+u.$selectContentColor.val()+"']").data("hex");url=$(n,e,o),i("<img>").addClass("w-100 h-auto").on("load",function(){u.$previewContentContainer.empty(),i(this).appendTo(u.$previewContentContainer.get(0)),t&&"function"==typeof t&&t(),u.$previewContainer.removeClass("loading"),a.emit("truckVanPreviewContainerSizeChanged")}).attr({src:url})}return{init:function(t){t&&(u.$el=i(t),u.$form=u.$el,u.$inputHeading=u.$el.find("#inputHeading"),u.$selectHeadingFont=u.$el.find("#selectHeadingFont"),u.$selectHeadingColor=u.$el.find("#selectHeadingColor"),u.$textareaContent=u.$el.find("#textareaContent"),u.$selectContentFont=u.$el.find("#selectContentFont"),u.$selectContentColor=u.$el.find("#selectContentColor"),u.$anchorInputBgColor=u.$el.find("#anchorInputBgColor"),u.$inputBgColorLine=u.$el.find("#inputBgColorLine"),u.$labelInputBgColor=u.$el.find("#labelInputBgColor"),u.$inputBgColor=u.$el.find("#inputBgColor"),u.$previewContainer=u.$el.find("#truck-van-preview"),u.$previewContainerBg=u.$el.find("#truck-van-preview-bg"),u.$previewHeadingContainer=u.$el.find("#truck-van-preview-heading"),u.$previewContentContainer=u.$el.find("#truck-van-preview-content"),u.$inputLength=u.$el.find("#inputLength"),u.$inputHeight=u.$el.find("#inputHeight"),u.$selectSize=u.$el.find("#selectSize"),u.$inputQuantity=u.$el.find("#inputQuantity"),u.$buttonSubmit=u.$el.find("#buttonSubmit"),u.$totalPrice=u.$el.find("#totalPrice"),u.$buttonBuy=u.$el.find(".snipcart-add-item"),u.$noJs=u.$el.find(".js--nojs-only"),o(),n())}}};$(document).ready(function(){new ComponentTruckVanForm($,window.helpers,window.events).init(document.querySelector(".js--component-truck-van-form"))});